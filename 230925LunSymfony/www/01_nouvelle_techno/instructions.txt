01>>>
>>> INSTALLATION DE SYMFONY 6 >>>

link>>>
https://www.youtube.com/watch?v=kuKb3VfcTWE&list=PLBq3aRiVuwyzI0MT4LhvwqkVenz5pF_DM&index=1&t=103s
<<<


>>>
link>>>
https://symfony.com/doc/current/doctrine.html
>>
composer require symfony/orm-pack
>>
composer require --dev symfony/maker-bundle
<<<<


>>>installer composer>>> 

>>
composer --version

>>>INSTALL SYMFONY>>>
>>
scoop install symfony-cli
(scoop = command package for windows)

>>>CREER UN PROJET  (avec symfony): >>>
>>
symfony new nouveau-projet

cf. cd nouveau-projet 
→ composer.json : ce sont les outils de base de Symfony. 
"symfony/console":"" qui gère la console, 
le dotenv pour le fichier .env,
le /flex pour gérer l'install de bundles, puis le framework lui-même, et le runtime pour l'exéc,
et gestion du format yaml. 
→ → → version minimale

>>>SAVOIR QUELLE VERSION ON A >>>
>>
cd nouveau-projet
>> 
symfony console about

!!!>> si Symphony 6, php 8


>>> CREER UN PROJET >>>
!!!>>> possible avec la commande de symfony ou composer: 

>>
symfony **** cf. en haut
>> 
composer create-project symfony/skeleton projet-composer


OU>>> CREATION D'UN PROJET WEB COMPLET
Ajouter le flag --full
= créer tout ce qui est nécessaire pour la base pour créer un site web. 

>>
symfony new --full nouveau-projet-web

!!!>>> --full is deprecated, use --webapp instead

avec composer >>>
>>
composer create-project symfony/website-skeleton projet-composer-web  


>>> INSTALLER VERSION ACTUELLE SUPPORTEE >>>
symfony new --full projet-lts --version=lts

>>> avec une version différente
>>
symfony new --full projet-4-4 --version=4.4


>>> TESTER UN SERVEUR >>> 


>>
symfony server:ca:install

>> 
composer require symfony/web-server-bundle

!!!>>>   
Your requirements could not be resolved to an installable set of packages.
    Problem 1
    - Root composer.json requires symfony/web-server-bundle 6.3.*, found symfony/web-server-bundle[v3.3.0-BETA1, ..., 3.4.x-dev, v4.0.0-BETA1, ..., 4.4.x-dev] but it does not match the constraint.
>>> bundle is deprecated since symfony 4.4 : use Symfony local web server OU utiliser une autre version de symfony et php 

>>> Reco : utiliser >>
>>
symfony serve 
(qui est la cli de symfony)


>>> BDD >>>
>>> site web : db diagram 
Entités au pluriel ou au singulier : pas de règles 



>>> CHECK VERSIONS 
>>
symfony -v
>>
composer --version 
OR
composer --v 


>>> >>>
>>
symfony check:requirements 
!!!>>> zones '.......w.......w' = zones warning 

Options intl 
et PDO 
intl : tout ce qui est internationalisations 
PDO : tout ce qui est BDD
s

>>
composer require symfony/intl

>>> check which php modules are installed >>>
>>
php -m

>>> zend opcache conseillé aussi


>>> GERER SON ENVIRONNEMENT >>> 
>> .env 
>>> sécurité : enregistrer .env en .env.local 

<<<01


02>>>
link>>>
https://www.youtube.com/watch?v=kpSYFMV4eJc&list=PLJjnH9ZjxzLQoqucT8dNk12UaXl1V3R8k
>>> PRESENTATION ET CONFIGURATION DU PROJET >>>

>>> Toujours vérifier ses versions && compatibilité >>>
>>
php -v 

>>>Changer la version de php : >>>
>>
symfony local:php:list
&& créer un fichier .php-version en root,
et placé le num de la version
OU 
dans composer.json, le tabl config :
>>
"platform": {
    "php": "8.2.1"
}



>>
mysql -v 

>>> Il faut également le cli de symfony >>>
>>
symfony -v 

&&
>>
composer --v
OU
composer --version 

&& 
>>> Verifier si on a tout ce qu'il faut pour Symfony >>>
>>
symfony check:requirements
>>> ....w....w = warnings 


Options intl 
et PDO 
intl : tout ce qui est internationalisations 
PDO : tout ce qui est BDD
s

>>
composer require symfony/intl
>>> not activated ??? 

Enable intl Extension:
Depending on your server setup, you may have different 
PHP configuration files (e.g., php.ini).
 /etc/php/ for Linux systems or 
 in the PHP folder for Windows systems.
Search for the line that begins with ;extension=intl.so (on Linux) 
or ;extension=intl (on Windows).
Remove the semicolon ; at the beginning of the line to uncomment it. 
It should look like this:
>>
extension=intl.so  ; on Linux
;extension=intl     ; on Windows
Save the php.ini file and close the text editor.

>>>??? TODO ???>>>
install pecl command-line tool to use intl. 
Once pecl is installed, run the following command to install the intl extension:
>>
pecl install intl

Follow the prompts to complete the installation.


>>> check which php modules are installed >>>
>>
php -m

>>> zend opcache conseillé aussi
>>> TODO >>>
check install opcache

>>> GERER SON ENVIRONNEMENT >>> 
.env>>>
>> .env 
>>> sécurité : enregistrer .env en .env.local 
cf>>> .env.local :
>>
APP_ENV=dev
= l'app est en cours de développement, 
il faudra passer en prod quand 
on sera en prod 

>>
APP_SECRET= *****
utilisé pour générer les jetons CSRF 
pour la validation des formulaires
-- à modifier également en entrant en prod

DEF>>>
Le jeton CSRF est une protection 
qui requiert l'insertion d'une valeur 
aléatoire et dynamique dans une requête.
 Cette valeur est ensuite analysée 
 par le serveur pour déterminer 
 si la requête est légitime.


>>> Pour la partie notifications ou 
envoi de mails avec file d'attente : 
>>
MESSENGER_TRANSPORT_DSN=doctrine://default?auto_setup=0
On choisit avec où est stockée la file d'attente.


cf>>>
>>
# DATABASE_URL="sqlite:///%kernel.project_dir%/var/data.db"
# DATABASE_URL="mysql://app:!ChangeMe!@127.0.0.1:3306/app?serverVersion=8.0.32&charset=utf8mb4"
# DATABASE_URL="mysql://app:!ChangeMe!@127.0.0.1:3306/app?serverVersion=10.11.2-MariaDB&charset=utf8mb4"
DATABASE_URL="postgresql://app:!ChangeMe!@127.0.0.1:5432/app?serverVersion=15&charset=utf8"

Si on utilise mysql, commenter pstgresql,
décommenter mysql, par exemple
Puis modifier la ligne :
>>
db_user → utilisateur ; 
e.g>> root 
db_password → le mot de passe de sa bdd 
Si il n'y a pas de mdp, on peut tout 
remplacer par un simple nom d'user. 
E.G>> ici, 
>>
app:!ChangeMe!
=
user:mdp 
ou juste user 
<<E.G 
>>
db_name 
= nom bdd 
OU ici  
>>
app? 
= nom bdd

&& 
>>
serverVersion= 
= la version du serveur à indiquer

&& en bas : 
>>
# MAILER_DSN=null://null
→ Si on veut envoyer des mails, il faut 
un intercepteur de emails ou un serveur distant ;
e.g mailhog (=serveur smtp qui intercepte 
les emails qu'on envoie depuis une app. 
cf.>>
https://www.youtube.com/watch?v=pwrA7Ebg7Qg
)
Il faudra changer le numéro du port 
E.G>> 
# MAILER_DSN=null://null
    ↓   ↓   ↓   
# MAILER_DSN=null://localhost:1025
<<E.G 


<<.env

<<<02